!function(){"use strict";var t,e={};t="undefined"!=typeof module?module.exports=e:function(){return this||(1,eval)("this")}(),t.xblocks=e,function(t){t.dom={},t.dom.attrs={},t.dom.attrs.ARRTS_BOOLEAN=["checked","selected","disabled","readonly","multiple","ismap","defer"],t.dom.attrs.getRealValue=function(e,o){return"true"===o||"false"===o||-1!==t.dom.attrs.ARRTS_BOOLEAN.indexOf(e)&&e===o?e===o||"true"===o:o},t.dom.attrs.toObject=function(e){if(1!==e.nodeType)return{};var o={};return Array.prototype.forEach.call(e.attributes,function(e){o[e.nodeName]=t.dom.attrs.getRealValue(e.nodeName,e.value)}),o}}(e),function(t,e){t.view={},t.view.register=function(t,o){e.DOM[t]=o},t.view.get=function(t){return e.DOM[t]}}(e,React),function(t,e){e.create=function(o,n){return n="object"==typeof n?n:{},n.lifecycle={created:function(){this.xblock=e.element.create(this)},removed:function(){this.xblock.destroy(),delete this.xblock}},t.register(o,n)}}(xtag,e),function(t,e,o){function n(t){this._name=t.tagName.toLowerCase(),this._node=t,this._component=null,this._observer=new MutationObserver(this._callbackMutation.bind(this)),this._init(this._callbackInit)}e.element={},e.element.create=function(t){return new n(t)},n.prototype._name=void 0,n.prototype._node=null,n.prototype._component=null,n.prototype._observer=null,n.prototype._timeoutRepaintId=0,n.prototype.destroy=function(){try{this._observer.disconnect(),this._isMountedComponent()&&(o.unmountComponentAtNode(this._node),this._component.unmountComponent(),this._component=null)}catch(t){}},n.prototype.update=function(t){if(this._isMountedComponent()){t="object"==typeof t?t:{};var e=this._getNodeProps();Object.keys(t).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),this._component.setProps(e)}},n.prototype._init=function(t){this._component=o.renderComponent(e.view.get(this._name)(this._getNodeProps()),this._node,this._callbackRender.bind(this,t))},n.prototype._repaint=function(){this.destroy(),this._init(this._callbackRepaint)},n.prototype._callbackInit=function(){t.fireEvent(this._node,"xb-created")},n.prototype._callbackRepaint=function(){t.fireEvent(this._node,"xb-repaint")},n.prototype._callbackRender=function(t){this._observer.observe(this._node,{attributes:!0,childList:!0,characterData:!0,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1}),t&&t.call(this)},n.prototype._callbackMutation=function(t){this._isMountedComponent()&&(t.some(this._checkChangeNode,this)?(clearTimeout(this._timeoutRepaintId),this._timeoutRepaintId=setTimeout(this._repaint.bind(this),1)):t.some(this._checkChangeAttributes,this)&&this.update())},n.prototype._getNodeProps=function(){return e.dom.attrs.toObject(this._node)},n.prototype._isMountedComponent=function(){return this._component&&this._component.isMounted()},n.prototype._checkChangeNode=function(t){return"childList"===t.type},n.prototype._checkChangeAttributes=function(t){return"attributes"===t.type}}(xtag,e,React)}();