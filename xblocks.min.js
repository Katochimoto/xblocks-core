!function(){"use strict";var t,e={};t="undefined"!=typeof module?module.exports=e:function(){return this||(1,eval)("this")}(),t.xblocks=e,function(t){t.dom={},t.dom.attrs={},t.dom.attrs.ARRTS_BOOLEAN=["checked","selected","disabled","readonly","multiple","ismap","defer"],t.dom.attrs.getRealValue=function(e,n){return"true"===n||"false"===n||-1!==t.dom.attrs.ARRTS_BOOLEAN.indexOf(e)&&e===n?e===n||"true"===n:n},t.dom.attrs.toObject=function(e){if(1!==e.nodeType)return{};var n={};return Array.prototype.forEach.call(e.attributes,function(e){n[e.nodeName]=t.dom.attrs.getRealValue(e.nodeName,e.value)}),n}}(e),function(t,e){t.view={},t.view.register=function(t,n){e.DOM[t]=n},t.view.get=function(t){return e.DOM[t]}}(e,React),function(t,e){function n(t){this._name=t}e.create=function(t){return new n(t)},n.prototype.register=function(){var n={},o={},i=this._name;for(var s in this)this.hasOwnProperty(s)&&0!==s.indexOf("_")&&(_.isPlainObject(this[s])&&(_.isFunction(this[s].get)||_.isFunction(this[s].set))?n[s]=_.cloneDeep(this[s]):_.isFunction(this[s])&&(o[s]=_.cloneDeep(this[s])));t.register(i,{lifecycle:{created:function(){this.xblock=e.element.create(this)},inserted:function(){},removed:function(){this.xblock.destroy(),delete this.xblock},attributeChanged:function(t,n,o){var i={};i[t]=e.dom.attrs.getRealValue(t,o),this.xblock.update(i)}},accessors:n,methods:o,events:{}})}}(xtag,e),function(t,e,n){function o(t){this._node=t,this._component=null;var o=t.tagName.toLowerCase(),i=function(){this._component=n.renderComponent(e.view.get(o)(this._getNodeProps()),this._node,this._observerBind.bind(this))}.bind(this),s=_.debounce(i,1);this._observer=new MutationObserver(function(t){t.some(this._checkParentMutation,this)&&this._isMountedComponent()&&(this.destroy(),s())}.bind(this)),i()}e.element={},e.element.create=function(t){return new o(t)},o.prototype.destroy=function(){if(this._observer.disconnect(),this._isMountedComponent())try{n.unmountComponentAtNode(this._node),this._component.unmountComponent(),this._component=null}catch(t){}},o.prototype.update=function(t){this._isMountedComponent()&&(t=_.isPlainObject(t)?t:{},t=_.extend(this._getNodeProps(),t),this._component.setProps(t))},o.prototype._getNodeProps=function(){return e.dom.attrs.toObject(this._node)},o.prototype._isMountedComponent=function(){return this._component&&this._component.isMounted()},o.prototype._checkParentMutation=function(t){return"childList"===t.type&&t.target===this._node},o.prototype._observerBind=function(){this._observer.disconnect(),this._observer.observe(this._node,{childList:!0,characterData:!0,subtree:!0})}}(xtag,e,React)}();