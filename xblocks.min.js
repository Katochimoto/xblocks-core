!function(){"use strict";var t,e={};t="undefined"!=typeof module?module.exports=e:function(){return this||(1,eval)("this")}(),t.xblocks=e,function(t){t.merge=function(t,e){return Object.keys(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t},t.type=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}}(e),function(t){t.dom={},t.dom.attrs={},t.dom.attrs.ARRTS_BOOLEAN=["checked","selected","disabled","readonly","multiple","ismap","defer","autofocus"],t.dom.attrs.getRealValue=function(e,n){return"true"===n||"false"===n||-1!==t.dom.attrs.ARRTS_BOOLEAN.indexOf(e)?""===n||e===n||"true"===n:n},t.dom.attrs.toObject=function(e){if(1!==e.nodeType)return{};var n={};return Array.prototype.forEach.call(e.attributes,function(e){n[e.nodeName]=t.dom.attrs.getRealValue(e.nodeName,e.value)}),n}}(e),function(t,e){var n={};t.view={},t.view.register=function(t,o){return o.mixins=Array.isArray(o.mixins)?o.mixins:[],o.mixins.push(n),e.DOM[t]=e.createClass(o)},t.view.get=function(t){return e.DOM[t]}}(e,React),function(t,e){e.create=function(n,o){return o="object"==typeof o?o:{},o.lifecycle={created:function(){this.xblock=e.element.create(this)},removed:function(){this.xblock.destroy(),delete this.xblock}},t.register(n,o)}}(xtag,e),function(t,e,n){function o(t){this._name=t.tagName.toLowerCase(),this._node=t,this._component=null,this._observer=new MutationObserver(this._callbackMutation.bind(this)),this._init(null,this._callbackInit)}e.element={},e.element.create=function(t){return new o(t)},o.prototype._name=void 0,o.prototype._node=null,o.prototype._component=null,o.prototype._observer=null,o.prototype.destroy=function(){try{this._observer.disconnect(),this._isMountedComponent()&&(n.unmountComponentAtNode(this._node),this._component.unmountComponent(),this._component=null)}catch(t){}},o.prototype.update=function(t){this._isMountedComponent()&&this._component.setProps(this._getNodeProps(t))},o.prototype._init=function(t,o){if(!this._isMountedComponent()){var i=e.view.get(this._name),r=this._getNodeProps(t),s=this._node.innerHTML||r.children;this._component=n.renderComponent(i(r,s),this._node,this._callbackRender.bind(this,o))}},o.prototype._repaint=function(){var t=this._isMountedComponent()?this._component.props:null;this.destroy(),this._init(t,this._callbackRepaint)},o.prototype._callbackInit=function(){t.fireEvent(this._node,"xb-created")},o.prototype._callbackRepaint=function(){t.fireEvent(this._node,"xb-repaint")},o.prototype._callbackRender=function(t){this._observer.observe(this._node,{attributes:!0,childList:!0,characterData:!0,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1}),t&&t.call(this)},o.prototype._callbackMutation=function(t){this._isMountedComponent()&&(t.some(this._checkChangeNode,this)?this._repaint():t.some(this._checkChangeAttributes,this)&&this.update())},o.prototype._getNodeProps=function(t){var n=e.dom.attrs.toObject(this._node);return"object"===e.type(t)&&e.merge(n,t),n},o.prototype._isMountedComponent=function(){return this._component&&this._component.isMounted()},o.prototype._checkChangeNode=function(t){return"childList"===t.type},o.prototype._checkChangeAttributes=function(t){return"attributes"===t.type}}(xtag,e,React)}();