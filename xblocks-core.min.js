!function(t,e){"use strict";function n(t){return m[d]=r.apply(e,t),d++}function r(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function i(t){if(h)setTimeout(r(i,t),0);else{var e=m[t];if(e){h=!0;try{e()}finally{o(t),h=!1}}}}function o(t){delete m[t]}function s(){f=function(){var t=n(arguments);return process.nextTick(r(i,t)),t}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function a(){var e="setImmediate$"+Math.random()+"$",r=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),f=function(){var r=n(arguments);return t.postMessage(e+r,"*"),r}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;i(e)},f=function(){var e=n(arguments);return t.port2.postMessage(e),e}}function l(){var t=y.documentElement;f=function(){var e=n(arguments),r=y.createElement("script");return r.onreadystatechange=function(){i(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r),e}}function p(){f=function(){var t=n(arguments);return setTimeout(r(i,t),0),t}}if(!t.setImmediate){var f,d=1,m={},h=!1,y=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?a():t.MessageChannel?c():y&&"onreadystatechange"in y.createElement("script")?l():p(),g.setImmediate=f,g.clearImmediate=o}}(new Function("return this")()),function(t,e){"use strict";function n(t){this.templates[t.getAttribute("ref")]=c.tmpl.compile(t.innerHTML)}function r(t){t.hasChildNodes()&&Array.prototype.forEach.call(t.querySelectorAll('script[type="text/x-template"][ref],template[ref]'),n,t),t.xblock=c.element.create(t)}function i(t){t.forEach(r)}function o(e){c.utils.dispatchEvent(t,"xb-created",{detail:{records:e}})}function s(e){c.utils.dispatchEvent(t,"xb-repaint",{detail:{records:e}})}var u=t.React,a=t.xtag,c=t.xblocks={};!function(){var t=function(t){c.tmpl=t()};t.amd=!0,function(){function n(){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(e,function(e){return t[e]||e}):this}}function r(t,e,n){return("string"==typeof e?e:e.toString()).replace(t.define||u,function(e,r,i,o){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in n||(":"===i?(t.defineParams&&o.replace(t.defineParams,function(t,e,i){n[r]={arg:e,text:i}}),r in n||(n[r]=o)):new Function("def","def['"+r+"']="+o)(n)),""}).replace(t.use||u,function(e,i){t.useParams&&(i=i.replace(t.useParams,function(t,e,r,i){if(n[r]&&n[r].arg&&i){var o=(r+":"+i).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[o]=n[r].text.replace(new RegExp("(^|[^\\w$])"+n[r].arg+"([^\\w$])","g"),"$1"+i+"$2"),e+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+i)(n);return o?r(t,o,n):o})}function i(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var o={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:e,compile:e};"undefined"!=typeof module&&module.exports?module.exports=o:"function"==typeof t&&t.amd?t(function(){return o}):(function(){return this||(0,eval)("this")}()).doT=o,String.prototype.encodeHTML=n();var s={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},u=/$^/;o.template=function(t,e,a){e=e||o.templateSettings;var c,l,p=e.append?s.append:s.split,f=0,d=e.use||e.define?r(e,t,a||{}):t;d=("var out='"+(e.strip?d.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):d).replace(/'|\\/g,"\\$&").replace(e.interpolate||u,function(t,e){return p.start+i(e)+p.end}).replace(e.encode||u,function(t,e){return c=!0,p.start+i(e)+p.endencode}).replace(e.conditional||u,function(t,e,n){return e?n?"';}else if("+i(n)+"){out+='":"';}else{out+='":n?"';if("+i(n)+"){out+='":"';}out+='"}).replace(e.iterate||u,function(t,e,n,r){return e?(f+=1,l=r||"i"+f,e=i(e),"';var arr"+f+"="+e+";if(arr"+f+"){var "+n+","+l+"=-1,l"+f+"=arr"+f+".length-1;while("+l+"<l"+f+"){"+n+"=arr"+f+"["+l+"+=1];out+='"):"';} } out+='"}).replace(e.evaluate||u,function(t,e){return"';"+i(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),c&&e.selfcontained&&(d="String.prototype.encodeHTML=("+n.toString()+"());"+d);try{return new Function(e.varname,d)}catch(m){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+d),m}},o.compile=function(t,e){return o.template(t,null,e)}}()}(),c.utils={},c.utils.REG_TYPE_EXTRACT=/\s([a-zA-Z]+)/,c.utils.REG_PRISTINE=/^[\$_a-z][\$\w]*$/i,c.utils.support={},c.utils.support.template="content"in t.document.createElement("template"),c.utils.support.msie=function(){var e=t.navigator.userAgent.toLowerCase(),n=/(msie) ([\w.]+)/.exec(e)||[];return n[1]?n[2]||"0":!1}(),c.utils.support.upgradeelements=Boolean(t.CustomElements&&"function"==typeof t.CustomElements.upgradeAll),c.utils.uid=function(){return Math.floor(268435456*(1+Math.random())+Date.now()).toString(36)},c.utils.seq=function(){var t=0;return function(){return++t}}(),c.utils.type=function(t){return null===t?"null":"undefined"==typeof t?"undefined":Object.prototype.toString.call(t).match(c.utils.REG_TYPE_EXTRACT)[1].toLowerCase()},c.utils.isEmptyObject=function(t){if("object"===c.utils.type(t)){var e;for(e in t)return!1}return!0},c.utils.isWindow=function(t){return null!==t&&t===t.window},c.utils.isPlainObject=function(t){return"object"!==c.utils.type(t)?!1:t.constructor&&!t.constructor.prototype.hasOwnProperty("isPrototypeOf")?!1:!0},c.utils.pristine=function(e){var n=t[e];if(!e||!n)return!1;if(!c.utils.REG_PRISTINE.test(e))return!1;var r=typeof n;if("function"!==r&&"object"!==r)return!1;var i=new RegExp("function\\s+"+e+"\\(\\s*\\)\\s*{\\s*\\[native code\\]\\s*}");return i.test(n)&&("function"!==r||n.valueOf&&n.valueOf()===n)?!0:!1},c.utils.merge=function(){var t,n,r,i,o,s,u=arguments[0]||{},a=1,l=arguments.length,p=!1,f=c.utils.type(u);for("boolean"===f&&(p=u,u=arguments[a]||{},a++),f=c.utils.type(u),"object"!==f&&"function"!==f&&(u={}),a===l&&(u=this,a--);l>a;a++)if(null!==(t=arguments[a]))for(n in t)r=u[n],i=t[n],u!==i&&(p&&i&&(c.utils.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,s=r&&Array.isArray(r)?r:[]):s=r&&c.utils.isPlainObject(r)?r:{},u[n]=c.utils.merge(p,s,i)):i!==e&&(u[n]=i));return u},c.utils._lazy=function(){return"function"!=typeof t.setImmediate||c.utils.support.msie?function(e){return t.setTimeout(e,0)}:t.setImmediate}(),c.utils.lazy=function(t,e){return t._args=(t._args||[]).concat(e),t._timer||(t._timer=c.utils._lazy(function(){t._timer=0,t(t._args.splice(0,t._args.length))})),t},c.utils.CustomEvent=function(){if(c.utils.pristine("CustomEvent"))return t.CustomEvent;var n=function(t,n){n=c.utils.merge({bubbles:!1,cancelable:!1,detail:e},n||{});var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r};return n.prototype=t.Event.prototype,n}(),c.utils.dispatchEvent=function(t,e,n){t.dispatchEvent(new c.utils.CustomEvent(e,n))},c.utils.equals=function(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;var n;for(n in t)if(t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]===e[n])continue;if("object"!=typeof t[n])return!1;if(!c.utils.equals(t[n],e[n]))return!1}for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0},c.utils.filterObject=function(t,e){var n={};return Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);e&&e(r,i)&&Object.defineProperty(n,r,i)}),n},c.utils.mapObject=function(t,e){var n={};return Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r),o=e&&e(r,i);"object"===c.utils.type(o)&&Object.defineProperty(n,o.name,o.descr)}),n},c.utils.upgradeElements=function(){return c.utils.support.upgradeelements?t.CustomElements.upgradeAll:function(){}}(),c.utils.contentNode=function(t){var e;return t.xuid&&1===t.nodeType&&t.hasChildNodes()&&(e=t.querySelector('[data-xb-content="'+t.xuid+'"]'),e||(e=t.querySelector('script[type="text/x-template"]:not([ref]),template:not([ref])'))),e||t},c.utils.propTypes=function(t){return c.view.get(t).originalSpec.propTypes||{}},c.dom={attrs:{ARRTS_BOOLEAN:["active","autofocus","checked","defer","disabled","ismap","multiple","readonly","required","selected","xb-static"],XB_ATTRS:{STATIC:"xb-static"}}},c.dom.attrs.toObject=function(t){var e={};return 1===t.nodeType&&Array.prototype.forEach.call(t.attributes,function(t){e[t.nodeName]=t.value}),e},c.dom.attrs.valueConversion=function(t,e,n){switch(n||("true"===e||"false"===e||-1!==c.dom.attrs.ARRTS_BOOLEAN.indexOf(t))&&(n=u.PropTypes.bool),n){case u.PropTypes.bool:return e===!0||""===e||t===e||"true"===e;case u.PropTypes.string:return String(e);case u.PropTypes.number:return Number(e);default:return e}},c.dom.attrs.typeConversion=function(t,e){e="object"==typeof e?e:{};for(var n in t)t.hasOwnProperty(n)&&(t[n]=c.dom.attrs.valueConversion(n,t[n],e[n]));return t},c.view={},c.view.create=function(t){return t=Array.isArray(t)?t:[t],t.unshift(!0,{}),t.push({propTypes:{_uid:u.PropTypes.string,children:u.PropTypes.renderable,"xb-static":u.PropTypes.bool},template:function(t,e){var n=u.__internals.Mount.findReactContainerForID(this._rootNodeID),r=n&&n.xuid&&n.templates;return r&&r.hasOwnProperty(t)?(e=e||{},e.dangerouslySetInnerHTML={__html:r[t](this.props)},u.DOM.div(e)):null}}),u.createClass(c.utils.merge.apply({},t))},c.view.register=function(t,e){if(u.DOM.hasOwnProperty(t))throw'Specified item "'+t+'" is already defined';return u.DOM[t]=c.view.create(e),u.DOM[t]},c.view.get=function(t){return u.DOM[t]},c.create=function(t,e){return e=Array.isArray(e)?e:[e],e.unshift(!0,{}),e.push({lifecycle:{created:function(){this.templates={},this.xuid=c.utils.seq(),this.getElementsByTagName("script").length?c.utils.lazy(i,this):r(this)},inserted:function(){null===this.xblock&&(this.xblock=c.element.create(this))},removed:function(){if(this.xblock){var t=this.content;this.xblock.destroy(),this.xblock=null,this.content=t}},attributeChanged:function(t,e,n){t===c.dom.attrs.XB_ATTRS.STATIC&&null===n&&this.xblock&&!this.mounted&&this.xblock._repaint()}},accessors:{mounted:{get:function(){return this.xblock&&this.xblock._isMountedComponent()}},content:{get:function(){return this.mounted?this.xblock._component.props.children:c.utils.contentNode(this).innerHTML},set:function(t){this.mounted?this.xblock.update({children:t}):(c.utils.contentNode(this).innerHTML=t,this.upgrade())}},attrs:{get:function(){return c.dom.attrs.toObject(this)}}},methods:{upgrade:function(){c.utils.upgradeElements(this)},cloneNode:function(t){var e=Node.prototype.cloneNode.call(this,!1);return e.templates=this.templates,t&&(e.content=this.content),e}}}),a.register(t,c.utils.merge.apply({},e))},c.element=function(t){this._name=t.tagName.toLowerCase(),this._node=t,this._propTypes=c.utils.propTypes(this._name),this._init(t.attrs,t.content,this._callbackInit)},c.element.create=function(t){return new c.element(t)},c.element.prototype._name=e,c.element.prototype._node=null,c.element.prototype._component=null,c.element.prototype._observer=null,c.element.prototype._propTypes=e,c.element.prototype.destroy=function(){u.unmountComponentAtNode(this._node),this.unmount()},c.element.prototype.unmount=function(){this._observer&&this._observer.disconnect(),this._isMountedComponent()&&(this._component.unmountComponent(),this._component=null)},c.element.prototype.update=function(t,e,n){if(this._isMountedComponent()){var r=this._node.attrs,i="setProps";if(c.utils.merge(!0,r,t),Array.isArray(e)&&e.length){i="replaceProps";var o=this._getCurrentProps();r=c.utils.merge(!0,o,r),r=c.utils.filterObject(r,function(t){return-1===e.indexOf(t)})}r.hasOwnProperty(c.dom.attrs.XB_ATTRS.STATIC)?this._repaint(n):(c.dom.attrs.typeConversion(r,this._propTypes),this._component[i](r,this._callbackUpdate.bind(this,n)))}},c.element.prototype._init=function(t,e,n){if(!this._isMountedComponent()){t._uid=this._node.xuid,c.dom.attrs.typeConversion(t,this._propTypes);var r=c.view.get(this._name)(t,e);t.hasOwnProperty(c.dom.attrs.XB_ATTRS.STATIC)?(this.unmount(),this._node.innerHTML=u.renderComponentToStaticMarkup(r),this._node.upgrade(),n&&n.call(this)):this._component=u.renderComponent(r,this._node,this._callbackRender.bind(this,n))}},c.element.prototype._repaint=function(t){var e=c.utils.merge(!0,this._node.attrs,this._getCurrentProps()),n=this._node.content;this.destroy(),this._init(e,n,this._callbackRepaint.bind(this,t))},c.element.prototype._callbackInit=function(){c.utils.dispatchEvent(this._node,"xb-created",{detail:{xblock:this}}),c.utils.lazy(o,this._node)},c.element.prototype._callbackRepaint=function(t){c.utils.dispatchEvent(this._node,"xb-repaint",{detail:{xblock:this}}),c.utils.lazy(s,this._node),t&&t.call(this)},c.element.prototype._callbackRender=function(t){this._node.upgrade(),this._observer||(this._observer=new MutationObserver(this._callbackMutation.bind(this))),this._observer.observe(this._node,{attributes:!0,childList:!0,characterData:!0,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1}),t&&t.call(this)},c.element.prototype._callbackMutation=function(t){if(this._isMountedComponent())if(t.some(this._checkNodeChange))this._repaint();else if(t.some(this._checkAttributesChange,this)){var e=t.filter(this._filterAttributesRemove,this).map(this._mapAttributesName);this.update(null,e)}},c.element.prototype._callbackUpdate=function(t){this._node.upgrade(),t&&t.call(this)},c.element.prototype._isMountedComponent=function(){return this._component&&this._component.isMounted()},c.element.prototype._getCurrentProps=function(){return this._isMountedComponent()?this._component.props:null},c.element.prototype._checkNodeChange=function(t){return"childList"===t.type},c.element.prototype._checkAttributesChange=function(t){return"attributes"===t.type&&this._propTypes.hasOwnProperty(t.attributeName)},c.element.prototype._filterAttributesRemove=function(t){return"attributes"===t.type&&!this._node.hasAttribute(t.attributeName)},c.element.prototype._mapAttributesName=function(t){return t.attributeName}}(function(){return this||(1,eval)("this")}());